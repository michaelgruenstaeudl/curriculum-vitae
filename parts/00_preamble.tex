%%%%%%%%%%%%
% PACKAGES %
%%%%%%%%%%%%

% Page geometry
\usepackage[top=2.5cm,
            bottom=2.5cm,
            left=2.0cm,
            right=2.0cm]{geometry}

% Engine-aware font setup
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{helvet}                    % Helvetica (Arial-like)
  \renewcommand*{\familydefault}{\sfdefault}
\else
  \usepackage{fontspec}
  \setmainfont{Arial}
  \setsansfont{Arial}
\fi

% Symbols and icons
\usepackage{fontawesome5}                % For \faIcon
\usepackage{eurosym}                     % For \euro
% \usepackage{academicons}               % For ORCID, ResearchGate, etc. (optional)

% Graphics and color
\usepackage{graphicx}
\usepackage[table]{xcolor}
\usepackage{xurl}                        % Breakable URLs
\usepackage{tikz}
\usetikzlibrary{calc}                    % Needed for some TikZ-based macros

% Tables
\usepackage{booktabs}                    % \toprule, \midrule, \bottomrule
\usepackage{longtable}
\setlength{\LTpre}{3pt}
\usepackage{multirow}
\usepackage{tabularx}
\usepackage{array}

% Custom column types
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% Lists
\usepackage{enumitem}

% Headers, footers, spacing, section formatting
\usepackage{fancyhdr}
\usepackage{setspace}
\usepackage[explicit]{titlesec}
\usepackage{ragged2e}
\usepackage{lastpage}

% Utilities
\usepackage{microtype}                   % For \textls and better hyphenation
\usepackage{wrapfig}
\usepackage{varwidth}
\usepackage{changepage}
\usepackage{scalerel}
\usepackage{ifthen}
\usepackage{mfirstuc}
\usepackage{vwcol}
\usepackage{amssymb}
\usepackage{soul}                        % Highlighting, underlines
\usepackage[normalem]{ulem}              % For \sout (strikethrough)
\usepackage{paracol}
\usepackage{needspace}

% Ornaments and extras
\usepackage{pgfgantt}
\usepackage[object=vectorian]{pgfornament}
\usepackage[many]{tcolorbox}
\usepackage{mdframed}

% Multicolumns
\usepackage{multicol}
\usepackage{vwcol}

% Dummy text
\usepackage{lipsum}

% Date
\usepackage[nodayofweek]{datetime}


%%%%%%%%%%%%%%%%%%%%%%
% Bibliography setup %
%%%%%%%%%%%%%%%%%%%%%%
\usepackage[
  backend=bibtex,
  style=numeric,
  sorting=ydnt,   % year (descending), name, title
  maxnames=99,
  minnames=99
]{biblatex}

\addbibresource{bibtex/CollectedPublications_MichaelGruenstaeudl_2025_07_21.bib}

% Remove the bibliography heading
\defbibheading{bibliography}{}

% Remove "References" title in article class
\renewcommand{\refname}{}

% Extra vertical spacing between bibliography items
\setlength\bibitemsep{1.5\itemsep}  % default is \itemsep, here we make it 1.5× larger
\setlength{\bibhang}{2em}          % align entries neatly regardless of number width
\setlength{\biblabelsep}{0.5em}

% --- Inverted numbering (clean, no double brackets) ---
\newcounter{bbx:total}
\AtDataInput{\stepcounter{bbx:total}}
\AtBeginBibliography{%
  \DeclareFieldFormat{labelnumber}{\number\numexpr\value{bbx:total}+1-#1\relax}%
}


% Hyperlinks (last package)
\usepackage{hyperref}
\hypersetup{
  colorlinks,
  citecolor=darkcyan,
  urlcolor=darkcyan,
  linkcolor=darkcyan
}
\urlstyle{same}

%%%%%%%%%%
% COLORS %
%%%%%%%%%%
\definecolor{darkcyan}{rgb}{0.0, 0.55, 0.55}
\definecolor{darkRed}{rgb}{0.545, 0, 0}
\newcommand{\mainColor}{darkgray}
\newcommand{\linkColor}{darkcyan}
\newcommand{\headerColor}{darkgray}

%%%%%%%%%%
% CONFIG %
%%%%%%%%%%
\newcommand{\myName}{Michael Gruenstaeudl (Grünstäudl), PhD}
\newcommand{\myEmail}{m_gruenstaeudl@fhsu.edu}
\newcommand{\myPhone}{+1 785 432 3184}
\newcommand{\myAddress}{Fort Hays State University, 600 Park Street, Hays, KS 67601, USA}
\newcommand{\myWebsiteURL}{http://gruenstaeudl-lab.com}
\newcommand{\myORCIDURL}{https://orcid.org/0000-0002-1666-1773}

%%%%%%%%%%%%%%%%%%%
% HEADER / FOOTER %
%%%%%%%%%%%%%%%%%%%
\pagestyle{fancy}
\fancyhf{}
\renewcommand{\sectionmark}[1]{\markboth{\thesection\quad #1}{}}
\addtolength{\headheight}{0.25cm}
\fancyhead[CE,CO]{\textcolor{darkgray}{\textsc{\leftmark}~~|~~\textls[-10]{\textsc{\myName}}}}
\fancyfoot[CE,CO]{\textcolor{\headerColor}{Page~\thepage~/~\pageref*{LastPage}}}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% --- Special: No header/footer on first page ---
\fancypagestyle{firstpage}{%
  \fancyhf{}                % clear header and footer
  \renewcommand{\headrulewidth}{0pt} % no header line
  \renewcommand{\footrulewidth}{0pt} % no footer line (optional)
}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% SECTION / SUBSECTION TITLES %
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% SECTION
\titleformat{\section}
  {\normalfont\large\bfseries}{}{0em}{
    \colorbox{\mainColor}{\parbox{\dimexpr\textwidth-2\fboxsep\relax}{\textcolor{white}{\thesection\quad#1}}}
  }
\titleformat{name=\section,numberless}
  {\normalfont\large\bfseries}{}{0em}{
    \colorbox{\mainColor}{\parbox{\dimexpr\textwidth-2\fboxsep\relax}{\textcolor{white}{#1}}}
  }
% Compact spacing before and after section titles
\titlespacing*{\section}{0pt}{0.7\baselineskip}{0.3\baselineskip}

% SUBSECTION
\titleformat{\subsection}
  {\normalfont\large\scshape\bfseries\color{\mainColor}}{}{0cm}{
    \color{\mainColor}
    \hbox{\rule[0.4ex]{20pt}{1pt}} {~\thesubsection~#1}
    \leaders\hbox{\rule[0.4ex]{1pt}{1pt}}\hfill
  }
\titleformat{name=\subsection,numberless}
  {\normalfont\large\scshape\bfseries\color{\mainColor}}{}{0cm}{
    \color{\mainColor}
    \hbox{\rule[0.4ex]{20pt}{1pt}} {~#1}
    \leaders\hbox{\rule[0.4ex]{1pt}{1pt}}\hfill
  }
% Compact spacing before and after subsection titles
\titlespacing*{\subsection}{0pt}{0.5\baselineskip}{0.25\baselineskip}

% SUBSUBSECTION
\titleformat{\subsubsection}
  {\normalfont\large\color{\mainColor}}{}{0cm}{
    \color{\mainColor}{#1}
  }
\titleformat{name=\subsubsection,numberless}
  {\normalfont\large\color{\mainColor}}{}{0cm}{
    \color{\mainColor}{#1}
  }
% Compact spacing before and after subsubsection titles
\titlespacing*{\subsubsection}{0pt}{0.4\baselineskip}{0.2\baselineskip}



%%%%%%%%%%%%%%%%%%%
% CUSTOM COMMANDS %
%%%%%%%%%%%%%%%%%%%
\newcommand{\cul}[1]{\underline{\smash{#1}}}
\newcommand*\circled[1]{\tikz[baseline=(char.base)]{
  \node[shape=circle,fill,inner sep=1pt,color=gray] (char) {\footnotesize\textcolor{white}{\textbf{#1}}};}}

% Example tcolorbox style
\tcbset{mystyle/.style={
  breakable,
  enhanced,
  outer arc=0pt,
  arc=0pt,
  colframe=\mainColor,
  colback=\mainColor!20,
  attach boxed title to top left,
  boxed title style={
    colback=\mainColor,
    outer arc=0pt,
    arc=0pt,
    top=3pt,
    bottom=3pt,
    },
  fonttitle=\sffamily
  }
}


% Environment: longtable with alternating row colors (auto-resets at end)
\newenvironment{shadedlongtable}[1]
  {\rowcolors{1}{gray!10}{white}\begin{longtable}{#1}}
  {\end{longtable}\rowcolors{0}{}{}}
